{
  "runbook_name": "Recompute Example",
  "package_name": "example_recompute",
  "description": "Demonstrates automatic recomputation when upstream dependencies change",
  "execution_state": {
    "events": [
      {
        "type": "graph_pushed",
        "snapshot_version": "d49e39c7ad7523cd9d25e26f9f350b73c66c979abccf2f0caee84e489035ce82",
        "timestamp": "2026-01-08T08:12:19.481936",
        "scenario_name": "Setup upstream data",
        "step_name": null
      },
      {
        "type": "command_executed",
        "command": "python -m example_recompute.setup_data",
        "returncode": 0,
        "stdout": "",
        "stderr": "",
        "timestamp": "2026-01-08T08:12:19.514483",
        "scenario_name": "Setup upstream data",
        "step_name": "setup_data"
      },
      {
        "type": "command_executed",
        "command": "python -m example_recompute.pipeline",
        "returncode": 0,
        "stdout": "Graph snapshot_version: d49e39c7ad7523cd9d25e26f9f350b73c66c979abccf2f0caee84e489035ce82\nWritten 3 rows for feature examples/parent\nPipeline\n============================================================\n\n[1/2] Computing parent feature...\n\n[2/2] Computing child feature...\nGraph snapshot_version: d49e39c7ad7523cd9d25e26f9f350b73c66c979abccf2f0caee84e489035ce82\n\nðŸ“Š Computing examples/child...\n  feature_version: 440ffb028aaa5cb21b155c4ef21debd81f283f99aa91ef58cbe541d71164b44f\nIdentified: 3 new samples, 0 samples with new provenance_by_field\nâœ“ Materialized 3 new samples\n\nðŸ“‹ Child provenance_by_field:\n  sample_uid=1: {'predictions': '55e4ad342b7f3a680eb3093b18394e05'}\n  sample_uid=2: {'predictions': '722b2b91a6e10ddaab5ab3115efcee45'}\n  sample_uid=3: {'predictions': '07f06ce7547de41903dfe1b3239acd04'}\n\n\nâœ… Pipeline complete!\n",
        "stderr": "sys:1: UserWarning: AUTO_CREATE_TABLES is enabled - automatically creating table 'examples__parent'. Do not use in production! Use proper database migration tools like Alembic for production deployments.\n",
        "timestamp": "2026-01-08T08:12:22.058928",
        "scenario_name": "Initial pipeline run",
        "step_name": "initial_run"
      },
      {
        "type": "command_executed",
        "command": "python -m example_recompute.pipeline",
        "returncode": 0,
        "stdout": "Graph snapshot_version: d49e39c7ad7523cd9d25e26f9f350b73c66c979abccf2f0caee84e489035ce82\nMetadata already exists for feature examples/parent (feature_version: 0aad9b8a2ea055cd...)\nSkipping write to avoid duplicates\nPipeline\n============================================================\n\n[1/2] Computing parent feature...\n\n[2/2] Computing child feature...\nGraph snapshot_version: d49e39c7ad7523cd9d25e26f9f350b73c66c979abccf2f0caee84e489035ce82\n\nðŸ“Š Computing examples/child...\n  feature_version: 440ffb028aaa5cb21b155c4ef21debd81f283f99aa91ef58cbe541d71164b44f\nIdentified: 0 new samples, 0 samples with new provenance_by_field\n\nðŸ“‹ Child provenance_by_field:\n  sample_uid=1: {'predictions': '55e4ad342b7f3a680eb3093b18394e05'}\n  sample_uid=2: {'predictions': '722b2b91a6e10ddaab5ab3115efcee45'}\n  sample_uid=3: {'predictions': '07f06ce7547de41903dfe1b3239acd04'}\n\nNo changes detected (idempotent)\n\nâœ… Pipeline complete!\n",
        "stderr": "",
        "timestamp": "2026-01-08T08:12:24.557188",
        "scenario_name": "Idempotent rerun",
        "step_name": "idempotent_run"
      },
      {
        "type": "graph_pushed",
        "snapshot_version": "31195f21044a744b4ea70c1ffe6432182e989ede74ed92a8c99e8cd269f14477",
        "timestamp": "2026-01-08T08:12:25.809630",
        "scenario_name": "Code evolution",
        "step_name": "update_parent_version"
      },
      {
        "type": "patch_applied",
        "patch_path": "patches/01_update_parent_algorithm.patch",
        "before_snapshot": "d49e39c7ad7523cd9d25e26f9f350b73c66c979abccf2f0caee84e489035ce82",
        "after_snapshot": "31195f21044a744b4ea70c1ffe6432182e989ede74ed92a8c99e8cd269f14477",
        "timestamp": "2026-01-08T08:12:25.809656",
        "scenario_name": "Code evolution",
        "step_name": "update_parent_version"
      },
      {
        "type": "command_executed",
        "command": "python -m example_recompute.pipeline",
        "returncode": 0,
        "stdout": "Graph snapshot_version: 31195f21044a744b4ea70c1ffe6432182e989ede74ed92a8c99e8cd269f14477\nWritten 3 rows for feature examples/parent\nPipeline\n============================================================\n\n[1/2] Computing parent feature...\n\n[2/2] Computing child feature...\nGraph snapshot_version: 31195f21044a744b4ea70c1ffe6432182e989ede74ed92a8c99e8cd269f14477\n\nðŸ“Š Computing examples/child...\n  feature_version: 7251e21c32d2d8e35a8ba389a8ce1b597663f206dee0ff55e542a3af1f1665cd\nIdentified: 3 new samples, 0 samples with new provenance_by_field\nâœ“ Materialized 3 new samples\n\nðŸ“‹ Child provenance_by_field:\n  sample_uid=1: {'predictions': '55e4ad342b7f3a680eb3093b18394e05'}\n  sample_uid=2: {'predictions': '722b2b91a6e10ddaab5ab3115efcee45'}\n  sample_uid=3: {'predictions': '07f06ce7547de41903dfe1b3239acd04'}\n\n\nâœ… Pipeline complete!\n",
        "stderr": "",
        "timestamp": "2026-01-08T08:12:28.412940",
        "scenario_name": "Code evolution",
        "step_name": "recompute_after_change"
      }
    ]
  }
}
