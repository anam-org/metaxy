{
  "runbook_name": "Basic Example",
  "package_name": "example_basic",
  "description": "Demonstrates automatic recomputation when upstream dependencies change",
  "execution_state": {
    "events": [
      {
        "type": "graph_pushed",
        "project_version": "490f2c18",
        "graph": {
          "examples/parent": {
            "metaxy_feature_version": "7de0f5e8",
            "fields": {
              "embeddings": "05e66510"
            },
            "feature_spec": {
              "key": "examples/parent",
              "id_columns": [
                "sample_uid"
              ],
              "deps": [],
              "fields": [
                {
                  "key": "embeddings",
                  "code_version": "1",
                  "deps": []
                }
              ],
              "metadata": {},
              "description": "Parent feature that generates embeddings from raw data."
            }
          },
          "examples/child": {
            "metaxy_feature_version": "b10ea448",
            "fields": {
              "predictions": "9cd1c608"
            },
            "feature_spec": {
              "key": "examples/child",
              "id_columns": [
                "sample_uid"
              ],
              "deps": [
                {
                  "feature": "examples/parent",
                  "select": null,
                  "rename": null,
                  "fields_mapping": {
                    "mapping": {
                      "type": "default",
                      "match_suffix": false,
                      "exclude_fields": []
                    }
                  },
                  "sql_filters": null,
                  "lineage": {
                    "relationship": {
                      "type": "1:1"
                    }
                  },
                  "optional": false
                }
              ],
              "fields": [
                {
                  "key": "predictions",
                  "code_version": "__metaxy_initial__",
                  "deps": []
                }
              ],
              "metadata": {},
              "description": "Child feature that uses parent embeddings to generate predictions."
            }
          }
        },
        "timestamp": "2026-02-13T16:09:15.004175",
        "scenario_name": "Setup upstream data",
        "step_name": null
      },
      {
        "type": "command_executed",
        "command": "python src/example_basic/setup_data.py",
        "returncode": 0,
        "stdout": "",
        "stderr": "",
        "timestamp": "2026-02-13T16:09:15.045486",
        "scenario_name": "Setup upstream data",
        "step_name": "setup_data"
      },
      {
        "type": "command_executed",
        "command": "python src/example_basic/pipeline.py",
        "returncode": 0,
        "stdout": "Graph project_version: 490f2c18\nWritten 3 rows for feature examples/parent\nPipeline\n============================================================\n\n[1/2] Computing parent feature...\n\n[2/2] Computing child feature...\nGraph project_version: 490f2c18\n\nðŸ“Š Computing examples/child...\n  feature_version: b10ea448\nIdentified: 3 new samples, 0 samples with new provenance_by_field\nâœ“ Materialized 3 new samples\n\nðŸ“‹ Child provenance_by_field:\n  sample_uid=1: {'predictions': '24503967'}\n  sample_uid=2: {'predictions': '24458329'}\n  sample_uid=3: {'predictions': '26963083'}\n\n\nâœ… Pipeline complete!\n",
        "stderr": "",
        "timestamp": "2026-02-13T16:09:16.279272",
        "scenario_name": "Initial pipeline run",
        "step_name": "initial_run"
      },
      {
        "type": "command_executed",
        "command": "python src/example_basic/pipeline.py",
        "returncode": 0,
        "stdout": "Graph project_version: 490f2c18\nMetadata already exists for feature examples/parent (feature_version: 7de0f5e8...)\nSkipping write to avoid duplicates\nPipeline\n============================================================\n\n[1/2] Computing parent feature...\n\n[2/2] Computing child feature...\nGraph project_version: 490f2c18\n\nðŸ“Š Computing examples/child...\n  feature_version: b10ea448\nIdentified: 0 new samples, 0 samples with new provenance_by_field\n\nðŸ“‹ Child provenance_by_field:\n  sample_uid=1: {'predictions': '24503967'}\n  sample_uid=2: {'predictions': '24458329'}\n  sample_uid=3: {'predictions': '26963083'}\n\nNo changes detected (idempotent)\n\nâœ… Pipeline complete!\n",
        "stderr": "",
        "timestamp": "2026-02-13T16:09:17.473404",
        "scenario_name": "Idempotent rerun",
        "step_name": "idempotent_run"
      },
      {
        "type": "graph_pushed",
        "project_version": "c423d51a",
        "graph": {
          "examples/parent": {
            "metaxy_feature_version": "68827f3e",
            "fields": {
              "embeddings": "3c8d3e9b"
            },
            "feature_spec": {
              "key": "examples/parent",
              "id_columns": [
                "sample_uid"
              ],
              "deps": [],
              "fields": [
                {
                  "key": "embeddings",
                  "code_version": "2",
                  "deps": []
                }
              ],
              "metadata": {},
              "description": "Parent feature that generates embeddings from raw data."
            }
          },
          "examples/child": {
            "metaxy_feature_version": "e5b92b18",
            "fields": {
              "predictions": "7cef6acb"
            },
            "feature_spec": {
              "key": "examples/child",
              "id_columns": [
                "sample_uid"
              ],
              "deps": [
                {
                  "feature": "examples/parent",
                  "select": null,
                  "rename": null,
                  "fields_mapping": {
                    "mapping": {
                      "type": "default",
                      "match_suffix": false,
                      "exclude_fields": []
                    }
                  },
                  "sql_filters": null,
                  "lineage": {
                    "relationship": {
                      "type": "1:1"
                    }
                  },
                  "optional": false
                }
              ],
              "fields": [
                {
                  "key": "predictions",
                  "code_version": "__metaxy_initial__",
                  "deps": []
                }
              ],
              "metadata": {},
              "description": "Child feature that uses parent embeddings to generate predictions."
            }
          }
        },
        "timestamp": "2026-02-13T16:09:18.163412",
        "scenario_name": "Code evolution",
        "step_name": "update_parent_version"
      },
      {
        "type": "patch_applied",
        "patch_path": "patches/01_update_parent_algorithm.patch",
        "before_snapshot": "490f2c18",
        "after_snapshot": "c423d51a",
        "before_graph": {
          "examples/parent": {
            "metaxy_feature_version": "7de0f5e8",
            "fields": {
              "embeddings": "05e66510"
            },
            "feature_spec": {
              "key": "examples/parent",
              "id_columns": [
                "sample_uid"
              ],
              "deps": [],
              "fields": [
                {
                  "key": "embeddings",
                  "code_version": "1",
                  "deps": []
                }
              ],
              "metadata": {},
              "description": "Parent feature that generates embeddings from raw data."
            }
          },
          "examples/child": {
            "metaxy_feature_version": "b10ea448",
            "fields": {
              "predictions": "9cd1c608"
            },
            "feature_spec": {
              "key": "examples/child",
              "id_columns": [
                "sample_uid"
              ],
              "deps": [
                {
                  "feature": "examples/parent",
                  "select": null,
                  "rename": null,
                  "fields_mapping": {
                    "mapping": {
                      "type": "default",
                      "match_suffix": false,
                      "exclude_fields": []
                    }
                  },
                  "sql_filters": null,
                  "lineage": {
                    "relationship": {
                      "type": "1:1"
                    }
                  },
                  "optional": false
                }
              ],
              "fields": [
                {
                  "key": "predictions",
                  "code_version": "__metaxy_initial__",
                  "deps": []
                }
              ],
              "metadata": {},
              "description": "Child feature that uses parent embeddings to generate predictions."
            }
          }
        },
        "after_graph": {
          "examples/parent": {
            "metaxy_feature_version": "68827f3e",
            "fields": {
              "embeddings": "3c8d3e9b"
            },
            "feature_spec": {
              "key": "examples/parent",
              "id_columns": [
                "sample_uid"
              ],
              "deps": [],
              "fields": [
                {
                  "key": "embeddings",
                  "code_version": "2",
                  "deps": []
                }
              ],
              "metadata": {},
              "description": "Parent feature that generates embeddings from raw data."
            }
          },
          "examples/child": {
            "metaxy_feature_version": "e5b92b18",
            "fields": {
              "predictions": "7cef6acb"
            },
            "feature_spec": {
              "key": "examples/child",
              "id_columns": [
                "sample_uid"
              ],
              "deps": [
                {
                  "feature": "examples/parent",
                  "select": null,
                  "rename": null,
                  "fields_mapping": {
                    "mapping": {
                      "type": "default",
                      "match_suffix": false,
                      "exclude_fields": []
                    }
                  },
                  "sql_filters": null,
                  "lineage": {
                    "relationship": {
                      "type": "1:1"
                    }
                  },
                  "optional": false
                }
              ],
              "fields": [
                {
                  "key": "predictions",
                  "code_version": "__metaxy_initial__",
                  "deps": []
                }
              ],
              "metadata": {},
              "description": "Child feature that uses parent embeddings to generate predictions."
            }
          }
        },
        "timestamp": "2026-02-13T16:09:18.169933",
        "scenario_name": "Code evolution",
        "step_name": "update_parent_version"
      },
      {
        "type": "command_executed",
        "command": "python src/example_basic/pipeline.py",
        "returncode": 0,
        "stdout": "Graph project_version: c423d51a\nWritten 3 rows for feature examples/parent\nPipeline\n============================================================\n\n[1/2] Computing parent feature...\n\n[2/2] Computing child feature...\nGraph project_version: c423d51a\n\nðŸ“Š Computing examples/child...\n  feature_version: e5b92b18\nIdentified: 3 new samples, 0 samples with new provenance_by_field\nâœ“ Materialized 3 new samples\n\nðŸ“‹ Child provenance_by_field:\n  sample_uid=1: {'predictions': '24503967'}\n  sample_uid=2: {'predictions': '24458329'}\n  sample_uid=3: {'predictions': '26963083'}\n\n\nâœ… Pipeline complete!\n",
        "stderr": "",
        "timestamp": "2026-02-13T16:09:19.382461",
        "scenario_name": "Code evolution",
        "step_name": "recompute_after_change"
      }
    ]
  }
}
